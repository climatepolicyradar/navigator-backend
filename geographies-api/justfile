# AWS Local Development Setup
aws-login profile="staging":
    # Login to AWS SSO with the specified profile
    @echo "üîê Logging in to AWS SSO with profile: {{profile}}..."
    @aws sso login --profile {{profile}} || (echo "‚ùå AWS SSO login failed"; exit 1)
    @echo "‚úÖ Successfully logged in to AWS SSO"

set-aws-profile profile="staging":
    # Set the AWS_PROFILE environment variable
    @export AWS_PROFILE={{profile}}
    @echo "üîÑ Set AWS_PROFILE to: {{profile}}"
    @echo "üí° Remember: This only affects the current shell session"


# dev
# should be used for first run
bootstrap:
    just initial-data

initial-data environment:
    @echo "downloading latest data from s3"
    aws s3 sync s3://cpr-{{environment}}-document-cache/geographies initial-data

# This is used for fully local development with localstack
dev:
    uv sync
    docker compose --profile dev up
