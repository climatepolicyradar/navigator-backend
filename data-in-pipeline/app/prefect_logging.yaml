# Prefect logging configuration schema version.
# See https://docs.prefect.io/latest/overview/configuration/logging/#custom-logging-configuration
version: 1

# Keep Prefect's existing loggers active while adding ours
disable_existing_loggers: false

formatters:
  standard:
    # Log format applied to all handlers
    format: "%(asctime)s | %(levelname)s | %(name)s | %(message)s"

handlers:
  console:
    # Prefect console handler.
    # Defaults documented at https://docs.prefect.io/latest/guides/logs/
    class: prefect.logging.handlers.PrefectConsoleHandler
    level: 0
    formatter: standard
    styles:
      log.web_url: bright_blue
      log.local_url: bright_blue

      log.info_level: cyan
      log.warning_level: yellow3
      log.error_level: red3
      log.critical_level: bright_red

      log.completed_state: green
      log.cancelled_state: yellow3
      log.failed_state: red3
      log.crashed_state: bright_red
      log.cached_state: bright_blue

      log.flow_run_name: magenta
      log.flow_name: bold magenta

loggers:
  prefect:
    level: NOTSET
    handlers:
      - console
    propagate: true
  app:
    level: NOTSET
    handlers:
      - console
    propagate: true
  # Suppress verbose HTTP client logs to prevent OTEL export feedback loop
  urllib3:
    level: WARNING
    propagate: false
  requests:
    level: WARNING
    propagate: false

root:
  level: DEBUG
  handlers:
    - console
